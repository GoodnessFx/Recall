# Recall — Personal Memory OS

Recall is a React + Vite application that unifies your digital “memories” (messages, screenshots, PDFs, notes, videos, bookmarks, etc.) into one place, adds AI-powered search and insights, and lets you connect common sources via “connectors”.

## Overview
- Central timeline view of memories with quick stats and filters (`src/App.tsx`).
- AI assistant chat that surfaces related memories and patterns (`src/src/components/AIChat.tsx`).
- Search bar supporting regular and AI semantic search (`src/src/components/SearchBar.tsx`).
- Connectors page to enable/disable sources and configure them (`src/src/components/ConnectorCard.tsx`, `src/src/hooks/useConnectors.ts`).
- Analytics pane for insights, top sources, and growth trends (`src/src/components/AnalyticsPanel.tsx`, `src/src/hooks/useAnalytics.ts`).
- Settings and theme toggling, with mock authentication (`src/src/components/SettingsPanel.tsx`, `src/src/contexts/AuthContext.tsx`).
- Supabase client integration for persistence (currently optional/mocked) (`src/src/contexts/SupabaseContext.tsx`).

## Tech Stack
- `react` + `vite` v6 (`package.json`, `vite.config.ts`).
- UI built with Radix-based components and shadcn-style primitives in `src/components/ui/*`.
- Icons via `lucide-react`.
- Supabase client via `@supabase/supabase-js`.
- TypeScript types in `src/src/types/index.ts`.

## Architecture
- Entry point renders the app root: `src/main.tsx:6`.
- App composition, tabs, and main flows live in `src/App.tsx`.
  - Welcome toast on sign-in: `src/App.tsx:71-75`.
  - Home tab shows quick stats and the `Timeline` of memories: `src/App.tsx:178-227`, `src/App.tsx:266-273`.
  - Search tab uses `SearchBar` to query or AI-search memories: `src/App.tsx:276-305`.
  - AI tab hosts `AIChat` for conversational exploration: `src/App.tsx:307-331`, component in `src/src/components/AIChat.tsx`.
  - Connectors tab lists and configures sources: `src/App.tsx:333-366`, data in `src/src/hooks/useConnectors.ts`.
  - Analytics tab surfaces insights and trends: `src/App.tsx:368-375`.
- Contexts
  - Authentication (mocked user/session): `src/src/contexts/AuthContext.tsx:16-27`, sign-in: `src/src/contexts/AuthContext.tsx:43-46`.
  - Theme provider: `src/src/contexts/ThemeContext.tsx` (UI state).
  - Supabase client and connectivity test: `src/src/contexts/SupabaseContext.tsx:18-35`, table `kv_store_df3ca070` check: `src/src/contexts/SupabaseContext.tsx:22-25`.
- Hooks
  - Memories: loads from Supabase if connected, otherwise uses rich mock data. Fetch attempt: `src/src/hooks/useMemories.ts:70-78`; mock fallback: `src/src/hooks/useMemories.ts:86-95`; client-side search: `src/src/hooks/useMemories.ts:103-119`.
  - Connectors: mock list with toggle/configure patterns: `src/src/hooks/useConnectors.ts:102-121`.
  - Analytics: mock analytics plus optional backend event/insight calls: `src/src/hooks/useAnalytics.ts:1-91`, track events: `src/src/hooks/useAnalytics.ts:73-91`.
- Components
  - Header with theme toggle and user badge: `src/src/components/Header.tsx:38-41`, `src/src/components/Header.tsx:98-131`.
  - Search bar with AI mode toggle and shortcuts: `src/src/components/SearchBar.tsx:71-86`, `src/src/components/SearchBar.tsx:39-49`.
  - Timeline grouping and infinite scroll: `src/src/components/Timeline.tsx:69-87`, date header formatting: `src/src/components/Timeline.tsx:34-52`.
  - Memory card visuals: `src/src/components/MemoryCard.tsx:72-142`.
  - Login form with email/password and Google (note): `src/src/components/LoginForm.tsx:30-45`, `src/src/components/LoginForm.tsx:47-74`, Google OAuth note: `src/src/components/LoginForm.tsx:248-256`.

## Supabase Integration
- Project settings are currently hardcoded via an autogenerated file: `src/utils/supabase/info.tsx:3-4`.
- The app attempts to call Supabase Edge Functions under paths like:
  - `functions/v1/make-server-df3ca070/memories` (`src/src/hooks/useMemories.ts:70-78`)
  - `functions/v1/make-server-df3ca070/search/ai` (`src/src/hooks/useMemories.ts:130-138`)
  - `functions/v1/make-server-df3ca070/analytics/*` (`src/src/hooks/useAnalytics.ts:73-91`, `src/src/hooks/useAnalytics.ts:143-162`)
- If Supabase is not reachable or not configured, hooks fall back to robust mock data so the UI remains fully usable.

## Running
- Install dependencies: `npm ci`
- Start the dev server: `npm run dev`
- Default dev port is `3000` (`vite.config.ts:58-60`). If busy, Vite auto-falls back (e.g., `3001`).
- Build the app: `npm run build`

### Startup Notes
- If the dev server tried to use `--color` with Vite v6, it fails with “Unknown option `--color`”. Run plain `npm run dev` without extra CLI color flags.
- If port `3000` is already in use, Vite switches to another port automatically and continues (logs will show the active URL).

## Configuration
- Supabase
  - Update `projectId` and `publicAnonKey` in `src/utils/supabase/info.tsx:3-4`.
  - Ensure the `kv_store_df3ca070` table exists for the connectivity check (`src/src/contexts/SupabaseContext.tsx:22-25`).
  - If you intend to use the Edge Functions referenced by hooks, deploy corresponding handlers for `memories`, `search/ai`, and `analytics` endpoints in your Supabase Functions.
- Theme and UI
  - UI primitives live in `src/components/ui/*` and are used throughout the app.
  - Icons come from `lucide-react`.

## Project Structure
```
src/
  components/
    ui/               # Reusable UI building blocks
  src/
    components/       # App feature components (AIChat, Timeline, etc.)
    contexts/         # Auth, Theme, Supabase providers
    hooks/            # useMemories, useConnectors, useAnalytics
    types/            # Core domain types
  utils/
    supabase/         # Supabase project info (autogenerated)
App.tsx               # App composition and tabs
main.tsx              # App bootstrap
vite.config.ts        # Vite config and aliases
```

## Features (Detailed)
- Timeline: groups memories by date, supports grid/timeline view, and infinite loading trigger (`src/src/components/Timeline.tsx:54-67`, `src/src/components/Timeline.tsx:69-87`).
- AI Chat: simulates conversational exploration and shows related memories you can click to open (`src/src/components/AIChat.tsx:172-193`).
- Search: regular search filters client-side; AI search can call a backend if configured (`src/src/components/SearchBar.tsx:20-30`, `src/src/hooks/useMemories.ts:125-138`).
- Connectors: shows popular sources (Telegram, WhatsApp, Screenshots, PDFs, YouTube, etc.) with mock configs and status (`src/src/hooks/useConnectors.ts:1-78`, `src/src/hooks/useConnectors.ts:102-121`).
- Analytics: mock insights, top sources, growth, and event tracking helpers (`src/src/hooks/useAnalytics.ts:1-91`, `src/src/hooks/useAnalytics.ts:143-162`).
- Settings/Auth: mock auth flows and profile view; upgrade prompts for premium features (`src/src/components/SettingsPanel.tsx:188-206`).

## Notes and Limitations
- Many data flows are mocked unless Supabase is configured. This allows full UI exploration without backend setup.
- Google OAuth requires configuration in your Supabase project (see note in `src/src/components/LoginForm.tsx:248-256`).
- The Supabase public anon key is embedded for convenience; for production, prefer environment variables and secure configuration management.

## Scripts
- `npm run dev` — start dev server
- `npm run build` — production build

